"use strict";function DynamicAdapt(t){this.type=t}DynamicAdapt.prototype.init=function(){const t=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let t=0;t<this.nodes.length;t++){const e=this.nodes[t],n=e.dataset.da.trim().split(","),o={};o.element=e,o.parent=e.parentNode,o.destination=document.querySelector(n[0].trim()),o.breakpoint=n[1]?n[1].trim():"767",o.place=n[2]?n[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.оbjects.push(o)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(t){return"("+this.type+"-width: "+t.breakpoint+"px),"+t.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(t,e,n){return Array.prototype.indexOf.call(n,t)===e}));for(let e=0;e<this.mediaQueries.length;e++){const n=this.mediaQueries[e],o=String.prototype.split.call(n,","),r=window.matchMedia(o[0]),i=o[1],l=Array.prototype.filter.call(this.оbjects,(function(t){return t.breakpoint===i}));r.addListener((function(){t.mediaHandler(r,l)})),this.mediaHandler(r,l)}},DynamicAdapt.prototype.mediaHandler=function(t,e){if(t.matches)for(let t=0;t<e.length;t++){const n=e[t];n.index=this.indexInParent(n.parent,n.element),this.moveTo(n.place,n.element,n.destination)}else for(let t=0;t<e.length;t++){const n=e[t];n.element.classList.contains(this.daClassname)&&this.moveBack(n.parent,n.element,n.index)}},DynamicAdapt.prototype.moveTo=function(t,e,n){e.classList.add(this.daClassname),"last"===t||t>=n.children.length?n.insertAdjacentElement("beforeend",e):"first"!==t?n.children[t].insertAdjacentElement("beforebegin",e):n.insertAdjacentElement("afterbegin",e)},DynamicAdapt.prototype.moveBack=function(t,e,n){e.classList.remove(this.daClassname),void 0!==t.children[n]?t.children[n].insertAdjacentElement("beforebegin",e):t.insertAdjacentElement("beforeend",e)},DynamicAdapt.prototype.indexInParent=function(t,e){const n=Array.prototype.slice.call(t.children);return Array.prototype.indexOf.call(n,e)},DynamicAdapt.prototype.arraySort=function(t){"min"===this.type?Array.prototype.sort.call(t,(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?-1:"last"===t.place||"first"===e.place?1:t.place-e.place:t.breakpoint-e.breakpoint})):Array.prototype.sort.call(t,(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?1:"last"===t.place||"first"===e.place?-1:e.place-t.place:e.breakpoint-t.breakpoint}))};const da=new DynamicAdapt("max");function email_test(t){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(t.value)}da.init();var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function isIE(){return(ua=navigator.userAgent).indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1}function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){if(isIE()){let e=document.querySelectorAll("._ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&null!=e[t].querySelector("img").getAttribute("src")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}}isIE()&&document.querySelector("html").classList.add("ie"),isMobile.any()&&document.querySelector("html").classList.add("_touch"),testWebP((function(t){!0===t?document.querySelector("html").classList.add("_webp"):document.querySelector("html").classList.add("_no-webp")})),ibg(),window.addEventListener("load",(function(){document.querySelector(".wrapper")&&setTimeout((function(){document.querySelector(".wrapper").classList.add("_loaded")}),0)}));let unlock=!0;if(location.hash){const t=location.hash.replace("#","");document.querySelector(".popup_"+t)?popup_open(t):document.querySelector("div."+t)&&_goto(document.querySelector("."+t),500,"")}let iconMenu=document.querySelector(".icon-menu");if(null!=iconMenu){let e=500,n=document.querySelector(".menu__body");iconMenu.addEventListener("click",(function(t){unlock&&(body_lock(e),iconMenu.classList.toggle("_active"),n.classList.toggle("_active"))}))}function menu_close(){let t=document.querySelector(".icon-menu"),e=document.querySelector(".menu__body");t.classList.remove("_active"),e.classList.remove("_active")}function body_lock(t){document.querySelector("body").classList.contains("_lock")?body_lock_remove(t):body_lock_add(t)}function body_lock_remove(t){let e=document.querySelector("body");if(unlock){let n=document.querySelectorAll("._lp");setTimeout((()=>{for(let t=0;t<n.length;t++){n[t].style.paddingRight="0px"}e.style.paddingRight="0px",e.classList.remove("_lock")}),t),unlock=!1,setTimeout((function(){unlock=!0}),t)}}function body_lock_add(t){let e=document.querySelector("body");if(unlock){let n=document.querySelectorAll("._lp");for(let t=0;t<n.length;t++){n[t].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}e.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",e.classList.add("_lock"),unlock=!1,setTimeout((function(){unlock=!0}),t)}}let title=document.querySelectorAll("._letter-animation");if(title)for(let o=0;o<title.length;o++){let r=title[o],l=r.innerHTML.replace("  "," ").split(" "),s="";for(let a=0;a<l.length;a++){let c=l[a],d=c.length;s+="<p>";for(let u=0;u<d;u++){let p=c.substr(u,1);" "==p&&(p="&nbsp;"),s=s+"<span>"+p+"</span>"}r.innerHTML=s,s+="&nbsp;</p>"}}let tabs=document.querySelectorAll("._tabs");for(let m=0;m<tabs.length;m++){let y=tabs[m],f=y.querySelectorAll("._tabs-item"),h=y.querySelectorAll("._tabs-block");for(let _=0;_<f.length;_++){let g=f[_];g.addEventListener("click",(function(t){for(let t=0;t<f.length;t++){f[t].classList.remove("_active"),h[t].classList.remove("_active")}g.classList.add("_active"),h[_].classList.add("_active"),t.preventDefault()}))}}const spollersArray=document.querySelectorAll("[data-spollers]");if(spollersArray.length>0){const v=Array.from(spollersArray).filter((function(t,e,n){return!t.dataset.spollers.split(",")[0]}));v.length>0&&S(v);const b=Array.from(spollersArray).filter((function(t,e,n){return t.dataset.spollers.split(",")[0]}));if(b.length>0){const w=[];b.forEach((t=>{const e={},n=t.dataset.spollers.split(",");e.value=n[0],e.type=n[1]?n[1].trim():"max",e.item=t,w.push(e)}));let q=w.map((function(t){return"("+t.type+"-width: "+t.value+"px),"+t.value+","+t.type}));q=q.filter((function(t,e,n){return n.indexOf(t)===e})),q.forEach((t=>{const e=t.split(","),n=e[1],o=e[2],r=window.matchMedia(e[0]),i=w.filter((function(t){if(t.value===n&&t.type===o)return!0}));r.addListener((function(){S(i,r)})),S(i,r)}))}function S(t,e=!1){t.forEach((t=>{t=e?t.item:t,e.matches||!e?(t.classList.add("_init"),A(t),t.addEventListener("click",L)):(t.classList.remove("_init"),A(t,!1),t.removeEventListener("click",L))}))}function A(t,e=!0){const n=t.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((t=>{e?(t.removeAttribute("tabindex"),t.classList.contains("_active")||(t.nextElementSibling.hidden=!0)):(t.setAttribute("tabindex","-1"),t.nextElementSibling.hidden=!1)}))}function L(t){const e=t.target;if(e.hasAttribute("data-spoller")||e.closest("[data-spoller]")){const n=e.hasAttribute("data-spoller")?e:e.closest("[data-spoller]"),o=n.closest("[data-spollers]"),r=!!o.hasAttribute("data-one-spoller");o.querySelectorAll("._slide").length||(r&&!n.classList.contains("_active")&&k(o),n.classList.toggle("_active"),_slideToggle(n.nextElementSibling,500)),t.preventDefault()}}function k(t){const e=t.querySelector("[data-spoller]._active");e&&(e.classList.remove("_active"),_slideUp(e.nextElementSibling,500))}}let gallery=document.querySelectorAll("._gallery");function gallery_init(){for(let t=0;t<gallery.length;t++){const e=gallery[t];lightGallery(e,{counter:!1,selector:"a",download:!1})}}function search_in_list(t){let e=t.parentNode.querySelector("ul").querySelectorAll("li"),n=t.value.toUpperCase();for(i=0;i<e.length;i++){let t=e[i],o=t;txtValue=o.textContent||o.innerText,txtValue.toUpperCase().indexOf(n)>-1?t.style.display="":t.style.display="none"}}function digi(t){return t.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}function digi_animate(t){if(t.length>0)for(let e=0;e<t.length;e++){const n=t[e],o=parseInt(n.innerHTML.replace(" ",""));n.classList.contains("_done")||digi_animate_value(n,0,o,1500)}}function digi_animate_value(t,e,n,o){var r=t,i=n-e,l=Math.abs(Math.floor(o/i));l=Math.max(l,50);var s,a=(new Date).getTime()+o;function c(){var t=(new Date).getTime(),e=Math.max((a-t)/o,0),l=Math.round(n-e*i);r.innerHTML=digi(l),l==n&&clearInterval(s)}s=setInterval(c,l),c(),t.classList.add("_done")}gallery&&gallery_init();let popup_link=document.querySelectorAll("._popup-link"),popups=document.querySelectorAll(".popup");for(let E=0;E<popup_link.length;E++){const x=popup_link[E];x.addEventListener("click",(function(t){if(unlock){popup_open(x.getAttribute("href").replace("#",""),x.getAttribute("data-video"))}t.preventDefault()}))}for(let M=0;M<popups.length;M++){popups[M].addEventListener("click",(function(t){t.target.closest(".popup__body")||popup_close(t.target.closest(".popup"))}))}function popup_open(t,e=""){document.querySelectorAll(".popup._active").length>0&&popup_close("",!1);let n=document.querySelector(".popup_"+t);if(n&&unlock){if(""!=e&&null!=e){document.querySelector(".popup_video").querySelector(".popup__video").innerHTML='<iframe src="https://www.youtube.com/embed/'+e+'?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>'}document.querySelector(".menu__body._active")||body_lock_add(500),n.classList.add("_active"),history.pushState("","","#"+t)}}function popup_close(t,e=!0){if(unlock){if(t){let e=t.querySelector(".popup__video");e&&(e.innerHTML=""),t.classList.remove("_active")}else for(let t=0;t<popups.length;t++){const e=popups[t];let n=e.querySelector(".popup__video");n&&(n.innerHTML=""),e.classList.remove("_active")}!document.querySelector(".menu__body._active")&&e&&body_lock_remove(500),history.pushState("","",window.location.href.split("#")[0])}}let popup_close_icon=document.querySelectorAll(".popup__close,._popup-close");if(popup_close_icon)for(let B=0;B<popup_close_icon.length;B++){const T=popup_close_icon[B];T.addEventListener("click",(function(){popup_close(T.closest(".popup"))}))}document.addEventListener("keydown",(function(t){"Escape"===t.code&&popup_close()}));let _slideUp=(t,e=500)=>{t.classList.contains("_slide")||(t.classList.add("_slide"),t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=t.offsetHeight+"px",t.offsetHeight,t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,window.setTimeout((()=>{t.hidden=!0,t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.classList.remove("_slide")}),e))},_slideDown=(t,e=500)=>{if(!t.classList.contains("_slide")){t.classList.add("_slide"),t.hidden&&(t.hidden=!1);let n=t.offsetHeight;t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,t.offsetHeight,t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=n+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),window.setTimeout((()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.classList.remove("_slide")}),e)}},_slideToggle=(t,e=500)=>t.hidden?_slideDown(t,e):_slideUp(t,e);function _wrap(t,e){t.parentNode.insertBefore(e,t),e.appendChild(t)}function _removeClasses(t,e){for(var n=0;n<t.length;n++)t[n].classList.remove(e)}function _is_hidden(t){return null===t.offsetParent}let moreBlocks=document.querySelectorAll("._more-block");if(moreBlocks.length>0){let P=document.querySelector(".wrapper");for(let D=0;D<moreBlocks.length;D++){const H=moreBlocks[D];let j=H.querySelectorAll("._more-item");if(j.length>0){let I,C=H.querySelector("._more-link"),$=H.querySelector("._more-content"),O=$.getAttribute("data-view");function W(t){let e,n=0,o=0;for(let t=0;t<j.length;t++)t<O&&(n+=j[t].offsetHeight),o+=j[t].offsetHeight;e="start"===t?o:n,I=window.innerWidth-P.offsetWidth,$.style.height=`${e}px`}function R(){let t=window.innerWidth-P.offsetWidth;(0===I&&t>0||I>0&&0===t)&&(C.classList.contains("_active")?W("start"):W())}"0s"===getComputedStyle($).getPropertyValue("transition-duration")&&($.style.cssText="transition-duration: 1ms"),C.addEventListener("click",(function(t){C.classList.contains("_active")?W():W("start"),C.classList.toggle("_active"),t.preventDefault()})),$.addEventListener("transitionend",R,!1),window.addEventListener("resize",(function(t){C.classList.contains("_active")?W("start"):W()})),W()}}}const ratings=document.querySelectorAll(".rating");function initRatings(){let t,e;for(let t=0;t<ratings.length;t++){n(ratings[t])}function n(t){o(t),r(),t.classList.contains("rating_set")&&function(t){const n=t.querySelectorAll(".rating__item");for(let l=0;l<n.length;l++){const s=n[l];s.addEventListener("mouseenter",(function(e){o(t),r(s.value)})),s.addEventListener("mouseleave",(function(t){r()})),s.addEventListener("click",(function(n){o(t),t.dataset.ajax?i(s.value,t):(e.innerHTML=l+1,r())}))}}(t)}function o(n){t=n.querySelector(".rating__active"),e=n.querySelector(".rating__value")}function r(n=e.innerHTML){const o=n/.05;t.style.width=`${o}%`}async function i(t,n){if(!n.classList.contains("rating_sending")){n.classList.add("rating_sending");let t=await fetch("rating.json",{method:"GET"});if(t.ok){const o=(await t.json()).newRating;e.innerHTML=o,r(),n.classList.remove("rating_sending")}else alert("Ошибка"),n.classList.remove("rating_sending")}}}function animate({timing:t,draw:e,duration:n}){let o=performance.now();requestAnimationFrame((function r(i){let l=(i-o)/n;l>1&&(l=1);let s=t(l);e(s),l<1&&requestAnimationFrame(r)}))}function makeEaseOut(t){return function(e){return 1-t(1-e)}}function makeEaseInOut(t){return function(e){return e<.5?t(2*e)/2:(2-t(2*(1-e)))/2}}function quad(t){return Math.pow(t,2)}function circ(t){return 1-Math.sin(Math.acos(t))}ratings.length>0&&initRatings(),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);class SearchSelector{constructor(t){this.cardList=t.cardList,this.wayServer=t.wayServer}get cardListBlock(){return document.getElementById(this.cardList)}_fetchData(){return fetch(this.wayServer).then((t=>t.json())).then((t=>{this.dataServer=t,this.sortObj(this.dataServer),this._renderData(this.dataArr,this.cardListBlock,this.cardList)})).catch((t=>{console.log(t)}))}}class RenderData extends SearchSelector{constructor(t){super(t),this.dataArr=[],this._fetchData()}sortObj(t){for(let e in t)e==this.cardList&&(this.dataArr=t[e])}checkSummNone(t){let e="card-balance__summ_total";return(t.sum_plan<=0||null==t.sum_plan)&&(e="card-balance__summ_total hidden"),e}checkSummColor(t){let e="color:$greenColor;";return t.sum/t.sum_plan*100<=45&&(e="color:#fc6e6a;"),e}checkBgColor(t){let e="background:$greenColor;";return e=t.progress>50?`background:#fc6e6a;width:${t.progress}%;`:`width:${t.progress}%;`,e}_patternHtmlBalance(t){return`\t<div class="cards__item">\n\t\t\t\t\t\t\t\t<div class="card card-balance">\n\t\t\t\t\t\t\t\t<h2 class="card-balance__title">${t.title}</h2>\n\t\t\t\t\t\t\t\t\t<div class="card-balance__summ">\n\t\t\t\t\t\t\t\t\t\t<span style=${this.checkSummColor(t)} class="card-balance__summ_current"> ${t.sum} ₽</span>\n\t\t\t\t\t\t\t\t\t\t<span class=${this.checkSummNone(t)}>/${t.sum_plan} ₽</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`}_patternHtmlSupport(t){return`\t<div class="cards__item">\n\t\t\t\t\t\t\t\t\t\t<div class="card card-support">\n\t\t\t\t\t\t\t\t\t\t\t<h2 class="card-support__title">${t.title}</h2>\n\t\t\t\t\t\t\t\t\t\t\t<div class="card-support__info support-info">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="support-info__number">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="support-info__number_project">${t.inwork_count}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="support-info__number_update">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>${t.burning_count}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="img__drop">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="img/Drop.svg" alt="" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="support-info__progress">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="support-info__progress_bar">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style=${this.checkBgColor(t)}></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="support-info__progress_time">${t.time_fakt}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>`}_renderData(t,e,n){"balance"==n?t.forEach((t=>{e.insertAdjacentHTML("beforeend",this._patternHtmlBalance(t))})):"support"==n&&t.forEach((t=>{e.insertAdjacentHTML("beforeend",this._patternHtmlSupport(t))}))}}class Active extends RenderData{constructor(t){super(t),this.btn=document.getElementById(t.btn),this.clickOfBtn(this.btn)}clickOfBtn(t){t.addEventListener("click",(()=>{this._fetchData()}))}}let renderBalance=new Active({cardList:"balance",btn:"balanceBtn",wayServer:"json/Server.json"}),renderSupport=new Active({cardList:"support",btn:"supportBtn",wayServer:"json/Server.json"});